# 配置

## package

- 文件： `package.json`
- 在 'contributes.configuration.properties' 下新增以下字段

```json
"github.copilot.completionPrompt": {
    "type": "object",
    "properties": {
        "next": {"type":"string" },
        "inline": {"type": "string"}
    }
},
"github.copilot.hackModels": {
    "type": "object",
    "default": {},
    "properties": {
        "base": {
            "type": "object",
            "default": {},
            "properties": {
                "baseUrl": {
                    "type": "string"
                },
                "apiKey": {
                    "type": "string"
                },
                "model": {
                    "type": "string"
                },
                "model_picker_enabled": {
                    "type": "boolean",
                    "default": true
                },
                "is_chat_default": {
                    "type": "boolean",
                    "default": false
                },
                "version": {
                    "type": "string",
                    "default": "v1.0.0"
                },
                "supported_endpoints": {
                    "type": "array",
                    "default": [],
                    "items": {
                        "type": "string",
                        "enum": [
                            "/chat/completions",
                            "/responses",
                            "/v1/messages"
                        ]
                    }
                },
                "capabilities": {
                    "type": "object",
                    "default": {
                        "type": "chat",
                        "family": "custom",
                        "tokenizer": "o200k_base",
                        "supports": {
                            "streaming": true,
                            "thinking": false,
                            "vision": false,
                            "tool_calls": true,
                            "parallel_tool_calls": true
                        }
                    },
                    "properties": {
                        "type": {
                            "const": "chat"
                        },
                        "tokenizer": {
                            "type": "string",
                            "enum": [
                                "cl100k_base",
                                "o200k_base"
                            ],
                            "default": "o200k_base"
                        },
                        "limits": {
                            "type": "object",
                            "properties": {
                                "max_prompt_tokens": {
                                    "type": "number"
                                },
                                "max_output_tokens": {
                                    "type": "number"
                                },
                                "max_context_window_tokens": {
                                    "type": "number",
                                    "default": 128000
                                },
                                "vision": {
                                    "type": "object",
                                    "properties": {
                                        "max_prompt_images": {
                                            "type": "number"
                                        }
                                    }
                                }
                            },
                            "additionalProperties": false
                        },
                        "supports": {
                            "type": "object",
                            "default": {
                                "thinking": false,
                                "vision": false,
                                "tool_calls": true,
                                "parallel_tool_calls": true
                            },
                            "properties": {
                                "parallel_tool_calls": {
                                    "type": "boolean",
                                    "default": true
                                },
                                "tool_calls": {
                                    "type": "boolean",
                                    "default": true
                                },
                                "streaming": {
                                    "type": [
                                        "boolean",
                                        "null"
                                    ],
                                    "default": true
                                },
                                "vision": {
                                    "type": "boolean",
                                    "default": false
                                },
                                "prediction": {
                                    "type": "boolean",
                                    "default": false
                                },
                                "thinking": {
                                    "type": "boolean",
                                    "default": false
                                }
                            }
                        }
                    }
                }
            },
            "required": [
                "apiKey",
                "baseUrl",
                "model"
            ],
            "additionalProperties": false
        },
        "inline": {
            "type": "object",
            "properties": {
                "baseUrl": {
                    "type": "string"
                },
                "apiKey": {
                    "type": "string"
                },
                "model": {
                    "type": "string"
                },
                "remove_prefix": {
                    "type": "boolean",
                    "default": false
                },
                "mode": {
                    "type": "string",
                    "enum": [
                        "chat",
                        "code"
                    ]
                },
                "stop": {
                    "type": "array",
                    "items": {
                        "type": "string"
                    }
                },
                "model_picker_enabled": {
                    "type": "boolean",
                    "default": false
                },
                "is_chat_default": {
                    "type": "boolean",
                    "default": false
                },
                "is_chat_fallback": {
                    "type": "boolean",
                    "default": true
                },
                "version": {
                    "type": "string",
                    "default": "v1.0.0"
                },
                "capabilities": {
                    "type": "object",
                    "properties": {
                        "type": {
                            "const": "completion"
                        },
                        "tokenizer": {
                            "type": "string",
                            "enum": [
                                "cl100k_base",
                                "o200k_base"
                            ],
                            "default": "o200k_base"
                        },
                        "limits": {
                            "type": "object",
                            "properties": {
                                "interval": {
                                    "type": "number",
                                    "default": 300
                                }
                            }
                        }
                    },
                    "additionalProperties": false
                }
            },
            "required": [
                "apiKey",
                "baseUrl",
                "model",
                "mode"
            ],
            "additionalProperties": false
        },
        "next": {
            "type": "object",
            "properties": {
                "baseUrl": {
                    "type": "string"
                },
                "apiKey": {
                    "type": "string"
                },
                "model": {
                    "type": "string"
                },
                "model_picker_enabled": {
                    "type": "boolean",
                    "default": false
                },
                "is_chat_default": {
                    "type": "boolean",
                    "default": false
                },
                "is_chat_fallback": {
                    "type": "boolean",
                    "default": true
                },
                "remove_code_mark": {
                    "type": "boolean",
                    "default": true
                },
                "version": {
                    "type": "string",
                    "default": "v1.0.0"
                },
                "supported_endpoints": {
                    "type": "array",
                    "items": {
                        "type": "string",
                        "enum": [
                            "/chat/completions",
                            "/responses",
                            "/v1/messages"
                        ]
                    }
                },
                "capabilities": {
                    "type": "object",
                    "default": {
                        "type": "chat",
                        "family": "custom",
                        "tokenizer": "o200k_base",
                        "supports": {
                            "streaming": true,
                            "thinking": false,
                            "vision": false,
                            "tool_calls": true,
                            "parallel_tool_calls": true
                        }
                    },
                    "properties": {
                        "type": {
                            "const": "chat"
                        },
                        "tokenizer": {
                            "type": "string",
                            "enum": [
                                "cl100k_base",
                                "o200k_base"
                            ],
                            "default": "o200k_base"
                        },
                        "limits": {
                            "type": "object",
                            "properties": {
                                "max_prompt_tokens": {
                                    "type": "number"
                                },
                                "max_output_tokens": {
                                    "type": "number"
                                },
                                "max_context_window_tokens": {
                                    "type": "number",
                                    "default": 128000
                                },
                                "vision": {
                                    "type": "object",
                                    "properties": {
                                        "max_prompt_images": {
                                            "type": "number"
                                        }
                                    }
                                }
                            },
                            "additionalProperties": false
                        },
                        "supports": {
                            "type": "object",
                            "default": {
                                "streaming": true,
                                "thinking": false,
                                "vision": false,
                                "tool_calls": true,
                                "parallel_tool_calls": true
                            },
                            "properties": {
                                "parallel_tool_calls": {
                                    "type": "boolean",
                                    "default": true
                                },
                                "tool_calls": {
                                    "type": "boolean",
                                    "default": true
                                },
                                "streaming": {
                                    "type": [
                                        "boolean",
                                        "null"
                                    ],
                                    "default": true
                                },
                                "vision": {
                                    "type": "boolean",
                                    "default": false
                                },
                                "prediction": {
                                    "type": "boolean",
                                    "default": false
                                },
                                "thinking": {
                                    "type": "boolean",
                                    "default": false
                                }
                            }
                        }
                    }
                }
            },
            "required": [
                "apiKey",
                "baseUrl",
                "model"
            ],
            "additionalProperties": false
        },
        "embedding": {
            "type": "object",
            "properties": {
                "baseUrl": {
                    "type": "string"
                },
                "apiKey": {
                    "type": "string"
                },
                "model": {
                    "type": "string"
                },
                "version": {
                    "type": "string",
                    "default": "v1.0.0"
                },
                "capabilities": {
                    "type": "object",
                    "properties": {
                        "type": {
                            "const": "embeddings"
                        },
                        "tokenizer": {
                            "type": "string",
                            "enum": [
                                "cl100k_base",
                                "o200k_base"
                            ],
                            "default": "o200k_base"
                        },
                        "chunk_strategy": {
                            "type": "string",
                            "enum": [
                                "token",
                                "recursive"
                            ],
                            "default": "token"
                        },
                        "limits": {
                            "type": "object",
                            "properties": {
                                "max_inputs": {
                                    "type": "number"
                                },
                                "max_token": {
                                    "type": "number"
                                }
                            },
                            "additionalProperties": false
                        }
                    }
                }
            },
            "required": [
                "apiKey",
                "baseUrl",
                "model"
            ],
            "additionalProperties": false
        },
        "fast": {
            "type": "object",
            "properties": {
                "baseUrl": {
                    "type": "string"
                },
                "apiKey": {
                    "type": "string"
                },
                "model": {
                    "type": "string"
                },
                "model_picker_enabled": {
                    "type": "boolean",
                    "default": true
                },
                "is_chat_default": {
                    "type": "boolean",
                    "default": false
                },
                "is_chat_fallback": {
                    "type": "boolean",
                    "default": false
                },
                "version": {
                    "type": "string",
                    "default": "v1.0.0"
                },
                "supported_endpoints": {
                    "type": "array",
                    "items": {
                        "type": "string",
                        "enum": [
                            "/chat/completions",
                            "/responses",
                            "/v1/messages"
                        ]
                    }
                },
                "capabilities": {
                    "type": "object",
                    "default": {
                        "type": "chat",
                        "family": "custom",
                        "tokenizer": "o200k_base",
                        "supports": {
                            "streaming": true,
                            "thinking": false,
                            "vision": false,
                            "tool_calls": true,
                            "parallel_tool_calls": true
                        }
                    },
                    "properties": {
                        "type": {
                            "const": "chat"
                        },
                        "tokenizer": {
                            "type": "string",
                            "enum": [
                                "cl100k_base",
                                "o200k_base"
                            ],
                            "default": "o200k_base"
                        },
                        "limits": {
                            "type": "object",
                            "properties": {
                                "max_prompt_tokens": {
                                    "type": "number"
                                },
                                "max_output_tokens": {
                                    "type": "number"
                                },
                                "max_context_window_tokens": {
                                    "type": "number",
                                    "default": 128000
                                },
                                "vision": {
                                    "type": "object",
                                    "properties": {
                                        "max_prompt_images": {
                                            "type": "number"
                                        }
                                    }
                                }
                            },
                            "additionalProperties": false
                        },
                        "supports": {
                            "type": "object",
                            "default": {
                                "streaming": true,
                                "thinking": false,
                                "vision": false,
                                "tool_calls": true,
                                "parallel_tool_calls": true
                            },
                            "properties": {
                                "parallel_tool_calls": {
                                    "type": "boolean",
                                    "default": true
                                },
                                "tool_calls": {
                                    "type": "boolean",
                                    "default": true
                                },
                                "streaming": {
                                    "type": [
                                        "boolean",
                                        "null"
                                    ],
                                    "default": true
                                },
                                "vision": {
                                    "type": "boolean",
                                    "default": false
                                },
                                "prediction": {
                                    "type": "boolean",
                                    "default": false
                                },
                                "thinking": {
                                    "type": "boolean",
                                    "default": false
                                }
                            }
                        }
                    }
                }
            },
            "required": [
                "apiKey",
                "baseUrl",
                "model"
            ],
            "additionalProperties": false
        },
        "extras": {
            "type": "array",
            "items": {
                "type": "object",
                "properties": {
                    "baseUrl": {
                        "type": "string"
                    },
                    "apiKey": {
                        "type": "string"
                    },
                    "model": {
                        "type": "string"
                    },
                    "is_chat_default": {
                        "type": "boolean",
                        "default": false
                    },
                    "is_chat_fallback": {
                        "type": "boolean",
                        "default": false
                    },
                    "version": {
                        "type": "string",
                        "default": "v1.0.0"
                    },
                    "info_messages": {
                        "type": "array",
                        "items": {
                            "type": "object",
                            "properties": {
                                "code": {
                                    "type": "string",
                                    "default": ""
                                },
                                "message": {
                                    "type": "string"
                                }
                            }
                        }
                    },
                    "supported_endpoints": {
                        "type": "array",
                        "items": {
                            "type": "string",
                            "enum": [
                                "/chat/completions",
                                "/responses",
                                "/v1/messages"
                            ]
                        }
                    },
                    "capabilities": {
                        "type": "object",
                        "default": {
                            "type": "chat",
                            "family": "custom",
                            "tokenizer": "o200k_base",
                            "supports": {
                                "streaming": true,
                                "thinking": false,
                                "vision": false,
                                "tool_calls": true,
                                "parallel_tool_calls": true
                            }
                        },
                        "properties": {
                            "type": {
                                "const": "chat"
                            },
                            "family": {
                                "type": "string",
                                "default": "custom"
                            },
                            "tokenizer": {
                                "type": "string",
                                "enum": [
                                    "cl100k_base",
                                    "o200k_base"
                                ],
                                "default": "o200k_base"
                            },
                            "limits": {
                                "type": "object",
                                "properties": {
                                    "max_prompt_tokens": {
                                        "type": "number"
                                    },
                                    "max_output_tokens": {
                                        "type": "number"
                                    },
                                    "max_context_window_tokens": {
                                        "type": "number",
                                        "default": 128000
                                    },
                                    "vision": {
                                        "type": "object",
                                        "properties": {
                                            "max_prompt_images": {
                                                "type": "number"
                                            }
                                        }
                                    }
                                },
                                "additionalProperties": false
                            },
                            "supports": {
                                "type": "object",
                                "default": {
                                    "streaming": true,
                                    "thinking": false,
                                    "vision": false,
                                    "tool_calls": true,
                                    "parallel_tool_calls": true
                                },
                                "properties": {
                                    "parallel_tool_calls": {
                                        "type": "boolean",
                                        "default": true
                                    },
                                    "tool_calls": {
                                        "type": "boolean",
                                        "default": true
                                    },
                                    "streaming": {
                                        "type": [
                                            "boolean",
                                            "null"
                                        ],
                                        "default": true
                                    },
                                    "vision": {
                                        "type": "boolean",
                                        "default": false
                                    },
                                    "prediction": {
                                        "type": "boolean",
                                        "default": false
                                    },
                                    "thinking": {
                                        "type": "boolean",
                                        "default": false
                                    }
                                }
                            }
                        },
                        "required": [
                            "type",
                            "family",
                            "tokenizer",
                            "supports"
                        ]
                    }
                },
                "required": [
                    "apiKey",
                    "baseUrl",
                    "model",
                    "capabilities"
                ],
                "additionalProperties": false
            }
        }
    },
    "required": [
        "base",
        "inline",
        "fast",
        "next",
        "embedding"
    ]
}
```

## tsconfig.base

- 文件：`tsconfig.base.json`
- 修改

```json
{
    "compilerOptions": {
        "module": "commonjs",
        "target": "es2022",
        "lib": ["ES2022"],
        "sourceMap": true,

        "experimentalDecorators": true,
        "noImplicitOverride": true,
        "noUnusedLocals": false,
        "useDefineForClassFields": false,
        "allowUnreachableCode": false,
        "noUnusedParameters": false,
        "strict": true,
        "exactOptionalPropertyTypes": false,
        "useUnknownInCatchVariables": false,
        "noFallthroughCasesInSwitch": true,
        "forceConsistentCasingInFileNames": true,
        "allowSyntheticDefaultImports": true,
        "esModuleInterop": true,
        "skipLibCheck": true
    }
}
```

## lint-staged.config

- 文件：`lint-staged.config.js`
- 修改: 返回空 `[]`

```js
module.exports = {
    '!({.esbuild.ts,test/simulation/fixtures/**,test/scenarios/**,.vscode/extensions/**,**/vscode.proposed.*})*{.ts,.js,.tsx}': async (files) => {
        const filesToLint = await removeIgnoredFiles(files);
        if (!filesToLint) {
            return [];
        }
        return [
            // `npm run tsfmt -- ${filesToLint}`,
            // `eslint --max-warnings=0 ${filesToLint}`
        ];
    },
};

```